<!doctype html>
<html lang="th">
<head>
	<meta charset="utf-8" />
	<meta name="viewport" content="width=device-width,initial-scale=1" />
	<title>Snow Notes</title>
	<link rel="stylesheet" href="styles.css" />
</head>
<body>
	<!-- background music -->
	<audio id="bgMusic" loop style="display:none">
		<source src="https://www.soundhelix.com/examples/mp3/SoundHelix-Song-1.mp3" type="audio/mpeg">
	</audio>

	<!-- music toggle button (visible to all users) -->
	<button id="musicToggle" aria-label="เปิด/ปิดเพลง" title="เปิด/ปิดเพลง">
		<svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M9 18v-4m6 4v-10M7 20h10c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2H7c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2z"/></svg>
	</button>

	<div id="topbar">
		<!-- เอาฟอร์มเพิ่มโน้ตแบบเก่าออก -->
		<div id="directAccess">
			<input id="codeInput" placeholder="กรอกรหัส 10 ตัว" maxlength="10" />
			<button id="openByCode">เปิด</button>
		</div>
	</div>

	<div id="main">
		<div id="field"></div>
		<aside id="sidebar">
			<h3>My Notes</h3>
			<ul id="myList"></ul>
		</aside>
	</div>

	<!-- floating add button (left-bottom) -->
	<button id="addBtn" aria-label="สร้างโน้ตใหม่" title="สร้างโน้ตใหม่">
		<!-- simple plus SVG -->
		<svg width="32" height="32" viewBox="0 0 24 24" fill="none" stroke="white" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round"><path d="M12 5v14M5 12h14"/></svg>
	</button>

	<!-- modal: create note -->
	<div id="createModal" class="hidden">
		<div class="modalBox">
			<h2>สร้างโน้ตใหม่</h2>
			<label>หัวข้อ (ไม่บังคับ): <input id="createTitle" placeholder="หัวข้อสั้น ๆ" /></label>
			<label>คำถาม/รายละเอียด:<textarea id="createText" rows="4" placeholder="พิมพ์คำถามหรือรายละเอียด..."></textarea></label>
			<label>รูปภาพ: <input type="file" id="createImage" accept="image/*" /></label>
			<div id="imagePreview" class="hidden"><img id="previewImg" alt="preview" /></div>

			<!-- improved visibility selector -->
			<div class="visibilityGroup">
				<label><input type="radio" name="visibility" id="createPublic" value="public" checked /> Public</label>
				<label><input type="radio" name="visibility" id="createPrivate" value="private" /> Private (ต้องใช้รหัส)</label>
			</div>

			<div class="modalActions">
				<button id="createSave">บันทึก</button>
				<button id="createCancel">ยกเลิก</button>
			</div>
		</div>
	</div>

	<!-- code popup: appears when private selected or before saving private note -->
	<div id="codeModal" class="hidden">
		<div class="modalBox">
			<h3>รหัสสำหรับโน้ต (Private)</h3>
			<p>คัดลอกรหัสนี้เก็บไว้เพื่อเปิด/แชร์กับผู้ที่ต้องการให้เข้าถึง</p>
			<pre id="generatedCode" style="user-select:all"></pre>
			<div style="display:flex;gap:8px;justify-content:flex-end;margin-top:8px">
				<button id="copyCodeBtn">คัดลอก</button>
				<button id="codeConfirmBtn">ยืนยันและปิด</button>
				<button id="codeCancelBtn">ยกเลิก</button>
			</div>
		</div>
	</div>

	<!-- modal for note viewing/reply -->
	<div id="modal" class="hidden">
		<div id="modalContent">
			<button id="closeModal">ปิด</button>
			<h2 id="modalCode"></h2>
			<p id="modalTitle"></p>
			<p id="modalText"></p>
			<div id="modalImageWrap" class="hidden"><img id="modalImage" alt="note image" /></div>
			<div id="replies"></div>
			<input id="replyInput" placeholder="พิมพ์คำตอบ..." />
			<button id="replyBtn">ตอบ</button>
			<button id="deleteBtn">ยกเลิกโน้ต (ลบ)</button>
		</div>
	</div>

	<script src="script.js"></script>
</body>
</html>
